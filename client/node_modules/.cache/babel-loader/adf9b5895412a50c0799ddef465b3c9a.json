{"ast":null,"code":"var _jsxFileName = \"/home/devcraft1/Desktop/phoneBook/client/phonebook/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport Notification from \"./components/Notification.js\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterString, setStringFilter] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(data => {\n      setPersons(data);\n    });\n  }, []);\n\n  const notifyWith = (message, type = \"success\") => {\n    setNotification({\n      message,\n      type\n    });\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterStringChange = event => {\n    setStringFilter(event.target.value);\n  };\n\n  const deletePerson = id => {\n    const toDelete = persons.find(p => p.id === id);\n    const ok = window.confirm(`Delete ${toDelete.name}`);\n\n    if (ok) {\n      personService.remove(id).then(response => {\n        setPersons(persons.filter(p => p.id !== id));\n        notifyWith(`Deleted ${toDelete.name}`);\n      }).catch(() => {\n        setPersons(persons.filter(p => p.id !== id));\n        notifyWith(`${toDelete.name} had already been removed`, \"error\");\n      });\n    }\n  };\n\n  const addPerson = event => {\n    event.preventDefault();\n    const existing = persons.find(p => p.name === newName);\n\n    if (existing) {\n      const ok = window.confirm(`${existing.name} already in phonebook, replace the old number with new one?`);\n\n      if (ok) {\n        personService.update(existing.id, {\n          name: existing.name,\n          number: newNumber\n        }).then(retunedPerson => {\n          setPersons(persons.map(person => person.id !== existing.id ? person : retunedPerson));\n          notifyWith(`Changed number of  ${existing.name}`);\n          setNewName(\"\");\n          setNewNumber(\"\");\n        });\n      }\n    } else {\n      personService.create({\n        name: newName,\n        number: newNumber\n      }).then(addedPerson => {\n        setPersons(persons.concat(addedPerson));\n        notifyWith(`Added ${newName}`);\n        setNewName(\"\");\n        setNewNumber(\"\");\n      }).catch(error => {\n        // pääset käsiksi palvelimen palauttamaan virheilmoitusolioon näin\n        console.log(error.response.data.error);\n        notifyWith(`${error.response.data.error} `, \"error\");\n      });\n    }\n  };\n\n  const personsToShow = filterString.length === 0 ? persons : persons.filter(p => p.name.toLowerCase().indexOf(filterString.toLowerCase()) > 0);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Phonebook\"), /*#__PURE__*/React.createElement(Notification, {\n    notification: notification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }), \"filter shown with:\", /*#__PURE__*/React.createElement(Filter, {\n    value: filterString,\n    onChange: handleFilterStringChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, \"add a new\"), /*#__PURE__*/React.createElement(PersonForm, {\n    handleNameChange: handleNameChange,\n    handleNumberChange: handleNumberChange,\n    newNumber: newNumber,\n    newName: newName,\n    addPerson: addPerson,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, \"Numbers\"), /*#__PURE__*/React.createElement(Persons, {\n    persons: personsToShow,\n    deletePerson: deletePerson,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/devcraft1/Desktop/phoneBook/client/phonebook/src/App.js"],"names":["React","useState","useEffect","Persons","PersonForm","Notification","Filter","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterString","setStringFilter","notification","setNotification","getAll","then","data","notifyWith","message","type","setTimeout","handleNameChange","event","target","value","handleNumberChange","handleFilterStringChange","deletePerson","id","toDelete","find","p","ok","window","confirm","name","remove","response","filter","catch","addPerson","preventDefault","existing","update","number","retunedPerson","map","person","create","addedPerson","concat","error","console","log","personsToShow","length","toLowerCase","indexOf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport Notification from \"./components/Notification.js\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterString, setStringFilter] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((data) => {\n      setPersons(data);\n    });\n  }, []);\n\n  const notifyWith = (message, type = \"success\") => {\n    setNotification({ message, type });\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterStringChange = (event) => {\n    setStringFilter(event.target.value);\n  };\n\n  const deletePerson = (id) => {\n    const toDelete = persons.find((p) => p.id === id);\n    const ok = window.confirm(`Delete ${toDelete.name}`);\n    if (ok) {\n      personService\n        .remove(id)\n        .then((response) => {\n          setPersons(persons.filter((p) => p.id !== id));\n          notifyWith(`Deleted ${toDelete.name}`);\n        })\n        .catch(() => {\n          setPersons(persons.filter((p) => p.id !== id));\n          notifyWith(`${toDelete.name} had already been removed`, \"error\");\n        });\n    }\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const existing = persons.find((p) => p.name === newName);\n    if (existing) {\n      const ok = window.confirm(\n        `${existing.name} already in phonebook, replace the old number with new one?`\n      );\n      if (ok) {\n        personService\n          .update(existing.id, {\n            name: existing.name,\n            number: newNumber,\n          })\n          .then((retunedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== existing.id ? person : retunedPerson\n              )\n            );\n            notifyWith(`Changed number of  ${existing.name}`);\n            setNewName(\"\");\n            setNewNumber(\"\");\n          });\n      }\n    } else {\n      personService\n        .create({\n          name: newName,\n          number: newNumber,\n        })\n        .then((addedPerson) => {\n          setPersons(persons.concat(addedPerson));\n          notifyWith(`Added ${newName}`);\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n        .catch((error) => {\n          // pääset käsiksi palvelimen palauttamaan virheilmoitusolioon näin\n          console.log(error.response.data.error);\n          notifyWith(`${error.response.data.error} `, \"error\");\n        });\n    }\n  };\n\n  const personsToShow =\n    filterString.length === 0\n      ? persons\n      : persons.filter(\n          (p) => p.name.toLowerCase().indexOf(filterString.toLowerCase()) > 0\n        );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      filter shown with:\n      <Filter value={filterString} onChange={handleFilterStringChange} />\n      <h3>add a new</h3>\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newNumber={newNumber}\n        newName={newName}\n        addPerson={addPerson}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}